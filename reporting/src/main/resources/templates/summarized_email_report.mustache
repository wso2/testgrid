<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
  ~ Copyright (c) 2017, WSO2 Inc. (http://wso2.com) All Rights Reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<html>
<head>
    <title>WSO2 Test Grid - Test Execution Summary</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
    <style>
        /*
        Report table style
         */
        table.reportTable {
            font-family: sans-serif;
            border: 0px solid #000000;
            background-color: #FFFFFF;
            width: 90%;
            table-layout: fixed;
            text-align: left;
            border-collapse: collapse;
        }

        table.reportTable td, table.reportTable th {
            border: 1px solid #000000;
            padding: 5px 5px;
        }

        table.reportTable tbody td {
            font-size: 12px;
            word-break: break-word;
        }

        table.reportTable tr:nth-child(even) {
            background: #F6F6F6;
        }

        table.reportTable thead {
            background: #949494;
            border-bottom: 2px solid #000000;
        }

        table.reportTable thead th {
            font-size: 16px;
            font-weight: bold;
            color: #000000;
            background: #949494;
            text-align: center;
        }

        table.reportTable thead th:first-child {
            border-left: none;
        }

        table[class="MainContainer"], td[class="cell"]
        	{
        		width: 100% !important;
        		height:auto !important;
        	}

        table.testcaseInfraSummaryTable {
            table-layout: auto;
        }
        /*
        Titles
         */
        .tableTitle {
            font-family: sans-serif;
            font-weight: 600;
            font-size: 20px;
            line-height: 20px;
            width: 100%;
            color: #e46226;
        }

        .mainTitle {
            font-family: sans-serif;
            font-weight: 900;
            font-size: 30px;
            line-height: 20px;
            width: 100%;
            color: #e46226;
        }

        .testResultSubTitle {
            font-family: sans-serif;
            font-size: 23px;
            line-height: 20px;
            font-weight: bold;
            color: #e46226;
            padding: 5px;
        }

        .consoleLog {
           font-family: monospace;
            font-size: 12px;
        }

        .failure {
            color: black;
            font-weight: bold;
            background: repeating-radial-gradient(circle, yellow, #ffd840);
        }

        .error {
            background-color: darkred;
        }

        .success {
            background-color: limegreen;
        }

    </style>
</head>
<body>
  <table width="600" border="0" cellspacing="0" cellpadding="0" valign='top'>
  <td><img src="http://cdn.wso2.com/wso2/newsletter/images/nl-2017/nl2017-wso2-logo-wb.png" alt="WSO2"></td>
  <td><h1>TestGrid <span style="color: #e46226;"> : Test Execution Results</span></h1></td>
  </table>
  <hr>
    <div style="margin: auto; background-color: #ffffff;">
            <table style="padding: 0 0; width: 100%; background: #ffffff;">
                <tr>
                    <td colspan="2"
                        style="font-family: arial; font-size: 16px; line-height: 24px; color: #676767; border-top: 0px solid #cccccc;">
                        <table>
                            <tr>
                                <td style="font-family: arial; font-size: 16px; line-height: 24px; text-align: center;">
                                    <span class ="mainTitle">{{productName}} integration tests FAILED!</span><br/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            <br/>
            <div><em>{{{gitBuildDetails}}}</em></div>
            <div>Tested Infrastructures: <br/> <em>{{{testedInfrastructures}}}</em></div>
            <br/>
            <span class="testResultSubTitle" align="center">Test Result Summary</span>
            <p/><p/>
            <table>
                <tr>
                    <td valign="top" style="padding:0 10px 10px 5px">
                        <img  src="cid:summary.png" alt="" border="0" align="left" height="300" width="300"/>
                    </td>
                    <td valign="middle" style="padding:0 10px 10px 100px">
                      <img  src="cid:history.png" alt="" border="0" align="left" height="300" width="400"/>
                    </td>
                </tr>
            </table>
            <br/>

        <!-- Start of test-case-vs-infrastructure success/failure summary table. -->
        <span class="testResultSubTitle" align="center">Test cases vs suspected culprits (beta)</span><p/>
        <div class="consoleLog">
            <span>
                <table class="reportTable testcaseInfraSummaryTable">
                    <thead>
                    <tr>
                        <th>Test case</th>
                        <th>Suspected Infrastructure Culprits</th>
                    </tr>
                    </thead>
                    <tbody>
                    {{#testCaseInfraSummaryTable}}
                        <tr>
                            <td>{{key}}</td>
                            {{#value}}
                                <td>
                                <table>
                                <tr>
                                    {{#failedInfra}}
                                        {{#.}}
                                            <td class="failure">
                                                {{.}}
                                            </td>
                                        {{/.}}
                                    {{/failedInfra}}
                                </tr>
                                </table>
                                <!--</td>-->
                                <!--<td>-->
                                    <!--<table>-->
                                    <!--<tr>-->
                                        <!--{{#successInfra}}-->
                                            <!--<td class="success">-->
                                                <!--{{.}}-->
                                            <!--</td>-->
                                        <!--{{/successInfra}}-->
                                    <!--</tr>-->
                                    <!--</table>-->
                                <!--</td>-->
                            {{/value}}
                        </tr>
                    {{/testCaseInfraSummaryTable}}
                    {{^testCaseInfraSummaryTable}}
                        <tr><td>no information available.</td></tr>
                    {{/testCaseInfraSummaryTable}}
                    </tbody>
                </table>
                </span>
        </div>
        <br/>

            <span class="testResultSubTitle">Testcase Failure Summary Table</span>
            <p/><p/>
          <table class="reportTable">
          <thead>
           <tr>
              <th width="25%">Failed Test Case</th>
              <th width="45%">Failure Message</th>
              <th>OS</th>
              <th>JDK</th>
              <th>DB</th>
           </tr>
           <thead>
           <tbody>
              {{#perTestCase}}
              <tr bgcolor="{{rowColor}}">
                 <td rowspan="{{rowSpan}}">{{testCaseName}}</td>
                 <td rowspan="{{rowSpan}}">{{testCaseDescription}}</td>
                 <td>{{testCaseExecutedOS}}</td>
                 <td>{{testCaseExecutedJDK}}</td>
                 <td>{{testCaseExecutedDB}}</td>
              </tr>
              {{#infraCombinations}}
              <tr bgcolor="{{rowColor}}">
                 <td>{{os}}</td>
                 <td>{{jdk}}</td>
                 <td>{{dbEngine}}</td>
              </tr>
              {{/infraCombinations}}
            {{/perTestCase}}
           </tbody>
        </table>
        <em>Tested by WSO2 TestGrid.</em>
    </div>
</body>
</html>
